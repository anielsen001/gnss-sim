---
title: "GNSS simulator"
---

An attempt to make a GNSS SDR simulator and use it for testing [balloon tracker payloads](https://github.com/anielsen001/high-altitude-balloon). This is based on an archived [LimeGPS simulator](https://github.com/osqzss/LimeGPS) since I have a LimeSDR. 

## Build and run container

I built a podman container based on ubuntu 22.04 and installed the dependencies into it. Obtain the container by building:
```bash
podman-compose -f compose.yml build limegps
```
or pull the container
```bash
podman pull ghcr.io/anielsen001/gnss-sim:latest
```
and run it
```bash
podman-compose -f compose.yml run limegps
```
you can likely substitute `docker` for `podman`. 

## USB device access {#sec-usb-dev-access}

With podman you need to set udev access to the usb devices for your user. On my host system I have ubuntu 24.04 which does not currently (30 Nov 2025) have a `limesuite-udev` pacakge on the myriadrf ppa. However [myriadrf/LimeSuite github](https://github.com/myriadrf/LimeSuite/blob/master/udev-rules/64-limesuite.rules) has a set of udev rules that you can use to create the udev rules for the LimeSDR.

Copy this set of rules into `/dev/udev/rules.d/64-limesuite.rules`.

```
SUBSYSTEM=="usb", ATTR{idVendor}=="04b4", ATTR{idProduct}=="8613", SYMLINK+="stream-%k", MODE="666"
SUBSYSTEM=="usb", ATTR{idVendor}=="04b4", ATTR{idProduct}=="00f1", SYMLINK+="stream-%k", MODE="666"
SUBSYSTEM=="usb", ATTR{idVendor}=="0403", ATTR{idProduct}=="601f", SYMLINK+="stream-%k", MODE="666"
SUBSYSTEM=="usb", ATTR{idVendor}=="1d50", ATTR{idProduct}=="6108", SYMLINK+="stream-%k", MODE="666"
SUBSYSTEM=="xillybus", MODE="666"

SUBSYSTEM=="tty", ATTRS{idVendor}=="0403", ATTRS{idProduct}=="6001", MODE="0666"
```

Reload the udev rules with

```bash
sudo udevadm control --reload-rules
sudo udevadm trigger
```

## GPS Ephemeris files from NASA

You will need space geodesy data from NASA. These are the ephemeris files that specify the satellite orbit. Foun at <https://cddis.nasa.gov/archive/gnss/data/daily/>. This does require registration for a free account. You can find details about the files at <https://www.earthdata.nasa.gov/data/space-geodesy-techniques/gnss/broadcast-ephemeris-data-product>. These files are updated hourly and ideally you want the most recent.

- [CDDIS GNSS FAQ](https://forum.earthdata.nasa.gov/viewtopic.php?t=6696)

For example there's an hourly file at <https://cddis.nasa.gov/archive/gnss/data/hourly/2025/337/hour3370.25n.gz> that can be used.

## Running simulation

start the container
```bash
podman-compose -f compose.yml run limegps
```
you will drop to a shell prompt in the container. Run the simulator
```bash
/opt/LimeGPS -e brdc0350.18n -l 35.274,137.014,100
```

LimeSDR Mini output maximum power is 10 mW. The LimeGPS executable allows you to specify the output gain using the `-a` flag. 

## Testing

Testing with [U4b balloon tracker](https://qrp-labs.com/u4b).

Connected the LimeSDR directly to the U4b using 60 dB of attenuation and a DC block and successfully simulated a GPS position. 

Run the container

```bash
podman-compose run limegps
```

In the container run the simulator

```bash
/opt/LimeGPS/LimeGPS -a 0.7 -e /opt/project/hour3370.25n 35.274,137.014,6400.00
```

:::{.callout-warning}
It appears that the specified altitude is ignored and the simulated alitude is 10m, see this [GitHub issue](https://github.com/anielsen001/gnss-sim/issues/5).
:::

![LimeSDR Mini cabled to U4b balloon tracker](/_sources/LimeSDR_Mini_cabled_to_U4b_sm.jpg)

![Putty connection to U4b in hardware test mode with simulator running](/_sources/u4b_hw_test_01.png)

## Reference projects

- [GNSS GPS SDR](https://github.com/JiaoXianjun/GNSS-GPS-SDR)
  - this has replay capability, but not simulation
- [GPS SDR Sim, archived project](https://github.com/osqzss/gps-sdr-sim)
  - [anielsen001 fork](https://github.com/anielsen001/gps-sdr-sim)
  - [LimeSDR video spoofing a phone](https://www.youtube.com/watch?v=fAaiNOZmM20)
- [LimeGPS, LimeSDR version of GPS SDR sim, also archived](https://github.com/osqzss/LimeGPS)
  - [anielsen001 fork](https://github.com/anielsen001/LimeGPS)
- [Pokemon implementation of GPS SDR Sim](https://github.com/JiaoXianjun/poke-move)
  - [anielsen001 fork](https://github.com/anielsen001/poke-move)
- [Multi SDR GPS Sim](https://github.com/Mictronics/multi-sdr-gps-sim)
	- cites [hrfGPS](https://github.com/IvanKor/hrfGPS) by Ivan Kor 
- [GNSS SDR](https://gnss-sdr.org/)
  - this is a receiver only
- [GNSS SDRlib](https://github.com/taroz/GNSS-SDRLIB)

